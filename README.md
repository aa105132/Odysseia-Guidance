# Odysseia - 月月社区AI助手

Odysseia 是一个为 Discord 社区“类脑”量身打造的、功能丰富的AI助手。其核心是拥有鲜明人设的AI“月月”，她不仅能与社区成员进行富有个性的互动，还集成了一系列旨在提升社区活跃度、帮助新人融入的功能。

---

## ✨ 核心功能

- **🤖 AI伴侣 "月月"**:
  - **鲜明人设**: 拥有独特的性格、记忆和情感，能以“月月”的身份与用户进行自然、有趣的对话。
  - **个人记忆**: 能够通过对话学习并记住用户的个人信息（如昵称、偏好），让互动更加个性化。
  - **工具使用**: 能够调用外部工具（如获取用户头像）来完成特定任务。

- **❤️ 动态好感度系统**:
  - **多样互动**: 通过喂食、赠送礼物、聊天甚至“表白”等方式，可以提升与“月月”的好感度。
  - **解锁内容**: 不同的好感度等级会解锁专属的互动和回应。

- **💰 社区经济与商店**:
  - **奥德赛币**: 内置“奥德赛币”经济系统，用户可通过参与社区活动和游戏赚取货币。
  - **道具商店**: 用户可以在商店中使用奥德赛币购买虚拟物品，如用于提升好感度的礼物。

- **🃏 内置小游戏**:
  - **二十一点 (Blackjack)**: 与朋友或“月月”来一场刺激的牌局。
  - **抽鬼牌 (Ghost Card)**: 经典卡牌游戏，考验你的运气和策略。

- **📚 社区世界书 (World Book)**:
  - **社区共建**: 这是一个由所有社区成员共同构建的知识库，记录着社区的文化、历史和梗。
  - **增量RAG**: “月月”能够实时查询“世界书”中的内容，以更准确、更富背景知识地回答用户的问题。

- **🧭 自动化新成员引导**:
  - **自动化流程**: 当成员获得特定身份组后，引导流程自动触发。
  - **个性化路径**: 根据用户选择的多个兴趣标签，动态生成独一无二的引导路径。
  - **分步式引导**: 在每个引导频道中，用户通过点击按钮来获取详细介绍并前往下一站，确保了流程的连贯性。

- **💬 智能话题预热**:
  - 当频道内有新帖子创建时，“月月”会自动进入并发表评论，帮助启动对话、预热话题。

- **🛠️ 统一管理面板**:
  - 提供一个统一的管理面板，方便管理员配置机器人的各项核心功能，包括新成员引导、聊天设置、活动管理等。

---

## 🚀 部署指南

我们强烈推荐使用 Docker Compose 进行一键部署，这是最简单、最快捷的方式。

### 1. 快速开始 (Docker)
- **环境准备**: Docker, Docker Compose
- **配置**:
    1. 将项目根目录下的 `.env.example` 文件复制为 `.env`。
    2. 打开 `.env` 文件，至少填入你的 Discord 机器人令牌 `DISCORD_TOKEN`。
- **启动**: 在项目根目录下运行 `docker-compose up --build -d`。

### 2. 手动部署 (备选)
1.  **环境准备**: Python 3.10+
2.  **克隆项目**: `git clone [仓库URL]`
3.  **安装依赖**: `pip install -r requirements.txt`
4.  **配置**: 参考 Docker 部署部分，创建并配置 `.env` 文件。
5.  **运行**: `python -m src.main`

---

## 📖 使用方法与命令列表

### 核心交互
- **自由聊天**: 在任何频道中 `@月月` 或直接回复她的消息，即可开始对话。
- **使用命令**: 通过 Discord 的斜杠命令 (`/`) 来使用各项功能。

### 主要命令
- **`/好感度`**: 查询你与月月的好感度状态。
- **`/投喂`**: 给月月分享你的美食，可以提升好感度。
- **`/忏悔`**: 向月月忏悔，可能会影响你们的关系。
- **`/类脑商店`**: 打开商店，使用奥德赛币购买礼物和道具。
- **`/blackjack`**: 开始一局刺激的21点游戏。
- **`/抽鬼牌`**: 和月月或朋友们玩一局抽鬼牌。

### 管理与配置
- **`/新人引导管理面板`**: 打开集成的多功能新人引导管理面板。这是配置新成员引导流程的核心工具。
- **`/聊天设置`**: 打开聊天功能设置面板。
- **`/数据库管理`**: (管理员) 以交互方式浏览和管理数据库内容。

### 新成员引导配置流程
1.  **基础配置**: 运行 `/新人引导管理面板`，进入“身份组配置”和“消息模板”完成基础设置。
2.  **创建标签**: 在管理面板中，进入“标签管理”，创建你希望新成员选择的兴趣领域，例如 "PVP玩家", "休闲玩家", "公会管理者"。
3.  **设置路径**: 进入“路径设置”，为上一步创建的每个标签指定一条或多条频道路径。
4.  **配置频道消息**: 进入“频道消息设置”，为每一个被你设置到路径中的频道定义该频道的介绍内容。
5.  **部署引导面板**: 进入“一键部署”，将引导面板部署到你希望新成员看到的起始频道。
6.  **完成**: 现在，当有成员获得你所设置的触发身份组时，整个流程就会自动开始！